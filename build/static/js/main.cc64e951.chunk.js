(this.webpackJsonpmemorygame=this.webpackJsonpmemorygame||[]).push([[1],{19:function(e,t,a){e.exports={Loading:"Leaderboard_Loading__2ymge",Leaderboard:"Leaderboard_Leaderboard__2gh9y",Header:"Leaderboard_Header__2KeWV",Rank:"Leaderboard_Rank__1hImS",Flips:"Leaderboard_Flips__3oqrS",Time:"Leaderboard_Time__NRFLf",Name:"Leaderboard_Name__Zp18c"}},22:function(e,t,a){"use strict";function n(e){for(var t=[],a=1;a<=e;a++)t.push("".concat(a<10?"0"+a:a,".jpg"));return t}a.r(t),a.d(t,"default",(function(){return n}))},27:function(e,t,a){e.exports={Rank:"LeaderboardEntry_Rank__jzbrV",Flips:"LeaderboardEntry_Flips__2Sgs7",Time:"LeaderboardEntry_Time__zmdWM",Name:"LeaderboardEntry_Name__BTLDO",Listitem:"LeaderboardEntry_Listitem__73MkR"}},28:function(e,t,a){e.exports={Footer:"Footer_Footer__238hM",Link:"Footer_Link__2v7FB",active:"Footer_active__2AMVE"}},33:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/back.857395ec.png"},34:function(e,t,a){e.exports={Card:"Card_Card__2v91Y",Matched:"Card_Matched__9I-yM"}},37:function(e,t,a){e.exports={Dashboard:"Dashboard_Dashboard__jFBog",DashboardWrapper:"Dashboard_DashboardWrapper__2VOJ5"}},38:function(e,t,a){e.exports={NameInput:"NameInput_NameInput__3p0j7",Button:"NameInput_Button__13HmM"}},41:function(e,t,a){e.exports={Container:"Congratulations_Container__1ERRc",Congratulations:"Congratulations_Congratulations__1qJt8"}},46:function(e,t,a){e.exports={Timer:"Timer_Timer__3ti8X"}},47:function(e,t,a){e.exports={Maingrid:"Maingrid_Maingrid__1DtyQ"}},48:function(e,t,a){e.exports={Loading:"Loading_Loading__2QGVy"}},65:function(e,t,a){var n={"./01.jpg":[72,4],"./02.jpg":[73,5],"./03.jpg":[74,6],"./04.jpg":[75,7],"./05.jpg":[76,8],"./06.jpg":[77,9],"./07.jpg":[78,10],"./08.jpg":[79,11],"./09.jpg":[80,12],"./10.jpg":[81,13],"./11.jpg":[82,14],"./12.jpg":[83,15],"./back.png":[33],"./imgFilenames":[22],"./imgFilenames.js":[22],"./tests/imgFilenames.test":[49,0],"./tests/imgFilenames.test.jsx":[49,0]};function r(e){if(!a.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],r=t[0];return Promise.all(t.slice(1).map(a.e)).then((function(){return a(r)}))}r.keys=function(){return Object.keys(n)},r.id=65,e.exports=r},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),c=a(32),i=a.n(c),o=a(20),u=a(25),s=a(5),d="LOAD_CARDS",l="FLIP_CARD",b="FLIP_BACK_UNMATCHED_CARDS",j="MARK_MATCHED_CARDS";function f(e,t,a){return{matchingId:e.indexOf(t)+1,uniqueId:"".concat(e.indexOf(t)+1).concat(a),imgFilename:t,randomFactor:Math.floor(100*Math.random())+1,matched:!1,flipped:!1}}var m="INCREASE_FLIP_COUNT",p="RESET_FLIP_COUNT",O="SET_NAME",h="SAVE_LAST_LOCATION";function v(e){return{type:h,pathname:e}}var _="START_TIMER",g="INCREASE_TIMER",x="PAUSE_TIMER",y="UNPAUSE_TIMER",C="RESET_TIMER";function N(){return{type:x}}var L=a(17),E=a.n(L),I=a(26),T=a(21);a(58);T.a.initializeApp({apiKey:"AIzaSyCIGd3HFXbbxk7Purbys3w0RwP5y9J0p14",authDomain:"memorygame-ea24f.firebaseapp.com",databaseURL:"https://memorygame-ea24f-default-rtdb.europe-west1.firebasedatabase.app",projectId:"memorygame-ea24f",storageBucket:"memorygame-ea24f.appspot.com",messagingSenderId:"204449371197",appId:"1:204449371197:web:482247ea16dc605c948654",measurementId:"G-7832FZSW4Q"});T.a.database();function F(){return(F=Object(I.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.database().ref("/leaderboard").once("value").then((function(e){if(e.exists())return e.val();console.log("No data available")})).catch((function(e){console.log(e)}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return(R=Object(I.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.database().ref("leaderboard/"+t.id).set(t,(function(e){e?console.log("Saving a new item to the server has failed"):console.log("A new item has been saved to the server successfully")}));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=Object(I.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={},!(void 0!==t&&Object.values(t).length>10)){e.next=5;break}return Object.values(t).sort((function(e,t){return e.secondCount-t.secondCount||e.requiredFlips-t.requiredFlips})).slice(0,10).forEach((function(e){a[e.id]=Object(s.a)({},e)})),e.next=5,T.a.database().ref("leaderboard").set(a,(function(e){e?console.log("Saving reduced leaderboard data to the server has failed"):console.log("Reduced leaderboard data have been saved to the server successfully")}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S="LEADERBOARD_LOADING";function M(e){return{type:S,loadingState:e}}var w="RECEIVE_ITEMS";function A(){return function(e){e(M(!0)),function(){return F.apply(this,arguments)}().then((function(t){e({type:w,items:t}),e(M(!1)),function(e){k.apply(this,arguments)}(t)}))}}function D(e){return function(t){t(function(e){return{type:"ADD_ITEM",newItem:e}}(e)),function(e){R.apply(this,arguments)}(e)}}var q=Object(o.b)({cards:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0;switch(a.type){case d:var n={},r=a.cards;return r.forEach((function(e){n["".concat(r.indexOf(e)+1,"a")]=f(r,e,"a"),n["".concat(r.indexOf(e)+1,"b")]=f(r,e,"b")})),Object(s.a)(Object(s.a)({},t),n);case l:var c=Object(s.a)({},t[a.id]);return c.flipped=!c.flipped,Object(s.a)(Object(s.a)({},t),{},Object(u.a)({},a.id,c));case b:var i=Object(s.a)({},t),o=Object.values(i).filter((function(e){return!0===e.flipped&&!1===e.matched&&e.uniqueId!==a.exceptOf})),m=o.length,p=[],O={};return 2===m&&(o.forEach((function(e){return p.push(Object(s.a)({},e))})),p.forEach((function(e){return e.flipped=!e.flipped})),p.forEach((function(e){return O[e.uniqueId]=e}))),Object(s.a)(Object(s.a)({},t),O);case j:var h=Object(s.a)({},t["".concat(a.matched1)]);h.matched=!0;var v=Object(s.a)({},t["".concat(a.matched2)]);return v.matched=!0,Object(s.a)(Object(s.a)({},t),{},(e={},Object(u.a)(e,a.matched1,h),Object(u.a)(e,a.matched2,v),e));default:return t}},game:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{flipCount:0,showCongrats:!1,name:"",pairCount:2,lastLocation:"/"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(s.a)(Object(s.a)({},e),{},{flipCount:e.flipCount+=1});case p:return Object(s.a)(Object(s.a)({},e),{},{flipCount:0});case O:return Object(s.a)(Object(s.a)({},e),{},{name:t.name});case h:return Object(s.a)(Object(s.a)({},e),{},{lastLocation:t.pathname});default:return e}},timer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{timerOn:!1,timerTime:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return Object(s.a)(Object(s.a)({},e),{},{timerOn:!0,timerTime:0});case g:return e.timerOn?Object(s.a)(Object(s.a)({},e),{},{timerTime:t.newCount}):Object(s.a)({},e);case x:return Object(s.a)(Object(s.a)({},e),{},{timerOn:!1});case y:return Object(s.a)(Object(s.a)({},e),{},{timerOn:!0});case C:return Object(s.a)(Object(s.a)({},e),{},{timerTime:0,timerOn:!1});default:return e}},leaderboard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(s.a)(Object(s.a)({},e),t.items);default:return e}},loadings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{leaderboardLoading:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return Object(s.a)(Object(s.a)({},e),{},{leaderboardLoading:t.loadingState});default:return e}}}),P=a(44),B=Object(o.a)(P.a),U=a(6),V=a(24),H=a(11),W=a(46),G=a.n(W),J=a(3);function z(e){var t=parseInt(e/60),a=e-60*t,n=a<10?"0":"";return"".concat(t<10?"0":"").concat(t,":").concat(n).concat(a)}function K(){var e=Object(U.b)(),t=Object(U.c)((function(e){return e.timer.timerOn})),a=Object(U.c)((function(e){return e.timer.timerTime}));return t&&setTimeout((function(){var t;e((t=a+=1,{type:g,newCount:t}))}),1e3),Object(J.jsxs)("div",{className:G.a.Timer,children:[Object(J.jsx)("p",{children:"Timer: "}),Object(J.jsx)("p",{style:{marginLeft:"0.5em"},children:z(a)})]})}var X=a(37),Q=a.n(X);function Y(){var e=Object(U.c)((function(e){return e.game.flipCount})),t=Object(U.c)((function(e){return e.game.name}));return Object(J.jsx)("div",{className:Q.a.Dashboard,children:Object(J.jsxs)("div",{className:Q.a.DashboardWrapper,children:[Object(J.jsxs)("p",{children:["Total flips: ",e]}),Object(J.jsx)(K,{}),Object(J.jsx)("p",{children:t})]})})}var Z=a(22),$=a(30),ee=a(33),te=a(34),ae=a.n(te);function ne(e){var t=e.uniqueId,n=Object(U.b)(),c=Object(U.c)((function(e){return e.cards})),i=Object(U.c)((function(e){return e.cards["".concat(t)]})),o=Object(U.c)((function(e){return e.timer.timerOn})),u=Object(U.c)((function(e){return e.game.lastLocation})),s=r.a.useState(ee.default),d=Object($.a)(s,2),f=d[0],p=d[1],O=r.a.useState([ae.a.Card]),h=Object($.a)(O,2),v=h[0],_=h[1];r.a.useEffect((function(){Object(I.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==i.flipped){e.next=5;break}return e.next=3,a(65)("./".concat(i.imgFilename)).then((function(e){p(e.default),!0===o&&"/"===u&&n({type:m})}));case 3:e.next=6;break;case 5:p(ee.default);case 6:case"end":return e.stop()}}),e)})))()}),[i.flipped,n,i.imgFilename]),r.a.useEffect((function(){i.matched?_(v.concat(ae.a.Matched)):_(v.filter((function(e){return e!==ae.a.Matched})))}),[i.matched]),r.a.useEffect((function(){if(!0===c[t].flipped){var e=t.slice(-1),a=t.match(/\d+/)[0]+("a"===e?"b":"a");!0===c[a].flipped&&n(function(e){var t=e.matched1,a=e.matched2;return{type:j,matched1:t,matched2:a}}({matched1:t,matched2:a}))}}),[c[t].flipped]);var g=function(){var e;n(function(e){var t=e.exceptOf,a=e.match;return{type:b,exceptOf:t,match:a}}({exceptOf:t})),!1===i.flipped&&n((e=i.uniqueId,{type:l,id:e}))};return Object(J.jsx)("div",{className:v.join(" "),children:Object(J.jsx)("img",{src:f,alt:"Memory card",onClick:function(){return g()},draggable:"false"})})}var re=function(){var e=Object(U.b)(),t=Object(U.c)((function(e){return e.game.pairCount})),a=function(){var a;e(N()),e({type:C}),e((a=Object(Z.default)(t),{type:d,cards:a})),e({type:p}),e({type:_})};return a},ce=a(38),ie=a.n(ce);function oe(){var e=Object(U.b)(),t=re(),a=Object(U.c)((function(e){return e.game.name})),n=r.a.useState(""),c=Object($.a)(n,2),i=c[0],o=c[1];return r.a.useEffect((function(){a||e(N())}),[a,e]),Object(J.jsxs)("div",{children:[Object(J.jsx)("input",{type:"text",placeholder:"Your name",className:ie.a.NameInput,onChange:function(e){return o(e.target.value)},value:i}),Object(J.jsx)("button",{type:"button",className:ie.a.Button,onClick:function(){e(function(e){return{type:O,name:e}}(i)),t()},children:"Start"})]})}var ue=a(47),se=a.n(ue);function de(){var e=Object(U.b)(),t=Object.values(Object(U.c)((function(e){return e.cards}))).sort((function(e,t){return e.randomFactor-t.randomFactor})),a=Object(U.c)((function(e){return e.game.pairCount})),n=Object(U.c)((function(e){return e.game.name})),c=Object(U.c)((function(e){return e.game.lastLocation}));return r.a.useEffect((function(){""!==n&&"/leaderboard"!==c&&e(function(e){return{type:d,cards:e}}(Object(Z.default)(a))),e(v("/"))}),[n,a]),""===n?Object(J.jsx)(oe,{}):0===t.length?Object(J.jsx)("div",{children:"No cards available yet"}):Object(J.jsx)("div",{className:se.a.Maingrid,children:t.map((function(e){return Object(J.jsx)(ne,{uniqueId:e.uniqueId},e.uniqueId)}))})}var le=a(48),be=a.n(le);function je(){return Object(J.jsx)("div",{className:be.a.Loading,children:"Loading ..."})}var fe=a(27),me=a.n(fe);function pe(e){var t=e.id,a=Object(U.c)((function(e){return e.leaderboard})),n=a[t];return Object(J.jsxs)("li",{className:me.a.Listitem,children:[Object(J.jsx)("p",{className:me.a.Rank,children:function(e,t){return Object.values(t).sort((function(e,t){return e.secondCount-t.secondCount||e.requiredFlips-t.requiredFlips})).map((function(e){return e.id})).indexOf(e)+1}(t,a)}),Object(J.jsx)("p",{className:me.a.Name,children:n.name}),Object(J.jsx)("p",{className:me.a.Time,children:n.time}),Object(J.jsx)("p",{className:me.a.Flips,children:n.requiredFlips})]},n.id)}var Oe=a(19),he=a.n(Oe);function ve(){var e=Object(U.b)(),t=Object(U.c)((function(e){return e.leaderboard})),a=Object(U.c)((function(e){return e.loadings.leaderboardLoading}));if(console.log("leaderboardLoading",a),r.a.useEffect((function(){e(e(N())),e(A())}),[e]),a)return Object(J.jsx)(je,{});if(0===Object.values(t).length)return Object(J.jsx)("div",{className:he.a.Loading,children:Object(J.jsx)("p",{children:"No stats available yet "})});var n=Object.values(t).sort((function(e,t){return e.secondCount-t.secondCount||e.requiredFlips-t.requiredFlips})).slice(0,10);return Object(J.jsxs)("ul",{className:he.a.Leaderboard,children:[Object(J.jsxs)("li",{className:he.a.Header,children:[Object(J.jsx)("p",{className:he.a.Rank,children:"Rank"}),Object(J.jsx)("p",{className:he.a.Name,children:"Name"}),Object(J.jsx)("p",{className:he.a.Time,children:"Time"}),Object(J.jsx)("p",{className:he.a.Flips,children:"Flips"})]}),n.map((function(e){return Object(J.jsx)(pe,{id:e.id},e.id)}))]})}var _e=a(28),ge=a.n(_e);function xe(){var e=Object(U.b)(),t=Object(H.g)();return Object(J.jsx)("footer",{className:ge.a.Footer,children:Object(J.jsx)("nav",{children:Object(J.jsxs)("ul",{children:[Object(J.jsx)("li",{children:Object(J.jsx)(V.b,{to:"/",exact:!0,activeClassName:ge.a.active,className:ge.a.Link,onClick:function(){e(v(t.pathname)),e({type:y})},children:"Game"})}),Object(J.jsx)("li",{children:Object(J.jsx)(V.b,{to:"/leaderboard",activeClassName:ge.a.active,className:ge.a.Link,children:"Leaderboard"})})]})})})}var ye=a(85),Ce=a(41),Ne=a.n(Ce);function Le(){var e=Object(U.b)(),t=re(),a=Object(U.c)((function(e){return e.game.name})),n=Object(U.c)((function(e){return e.game.flipCount})),r=Object(U.c)((function(e){return e.timer.timerTime})),c=Object.values(Object(U.c)((function(e){return e.cards}))),i={id:Object(ye.a)(),name:a,requiredFlips:n,time:z(r),secondCount:r};return!!(c.length>0&&c.every((function(e){return!0===e.matched})))&&(e(e(N())),Object(J.jsx)("div",{className:Ne.a.Container,onClick:function(){return!1},children:Object(J.jsxs)("div",{className:Ne.a.Congratulations,children:[Object(J.jsx)("p",{children:"Congratulations!"}),Object(J.jsx)("button",{type:"button",onClick:function(){t(),e(D(i))},children:"Play again"})]})}))}a(69);var Ee=function(){return Object(J.jsxs)("div",{className:"App",children:[Object(J.jsx)(Y,{}),Object(J.jsx)(Le,{}),Object(J.jsxs)(H.d,{children:[Object(J.jsx)(H.b,{path:"/leaderboard",exact:!0,component:ve}),Object(J.jsx)(H.b,{path:"/",exact:!0,component:de}),Object(J.jsx)(H.a,{from:"*",to:"/"})]}),Object(J.jsx)(xe,{})]})},Ie=(a(70),window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.c),Te=Object(o.d)(q,Ie(B));i.a.render(Object(J.jsx)(V.a,{children:Object(J.jsx)(r.a.StrictMode,{children:Object(J.jsx)(U.a,{store:Te,children:Object(J.jsx)(Ee,{})})})}),document.getElementById("root"))}},[[71,2,3]]]);
//# sourceMappingURL=main.cc64e951.chunk.js.map